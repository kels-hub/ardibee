<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Shipping Calculator - Dashboard</title>
    <link rel="stylesheet" href="dashboard.css">
    <!-- LZString Compression Library -->
    <script src="https://cdn.jsdelivr.net/npm/lz-string@1.4.4/libs/lz-string.min.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">
            <h2>üì¶ Shipping Calculator</h2>
        </div>
        <div class="nav-user">
            <button id="exportBtn" class="nav-btn" title="Export Data">üíæ Export</button>
            <input type="file" id="importInput" accept=".json" style="display: none;">
            <button onclick="document.getElementById('importInput').click()" class="nav-btn" title="Import Data">üìÅ Import</button>
            <button id="shareBtn" class="nav-btn" title="Share URL">üì§ Share</button>
            <span id="userWelcome">Welcome, User!</span>
            <button id="logoutBtn" class="logout-btn">Logout</button>
        </div>
    </nav>

    <div class="container">
        <!-- Fixed Top Section: Exchange Rates -->
        <div class="top-section">
            <div class="rates-card">
                <h3>üí∞ Exchange Rates</h3>
                <div class="rates-grid">
                    <div class="rate-item">
                        <label>CBM Rate ($)</label>
                        <input type="number" id="cbmRate" value="247" step="0.01">
                    </div>
                    <div class="rate-item">
                        <label>Dollar Rate (‚Çµ)</label>
                        <input type="number" id="dollarRate" value="15" step="0.01">
                    </div>
                    <div class="rate-item">
                        <label>Yuan Rate (‚Çµ)</label>
                        <input type="number" id="yuanRate" value="0.575" step="0.0001">
                    </div>
                </div>
            </div>
        </div>

        <!-- Scrollable Middle Section: Products -->
        <div class="middle-section">
            <div class="products-section">
                <div class="section-header">
                    <h3>üìã Products</h3>
                    <button id="addProductBtn" class="add-btn">+ Add Product</button>
                </div>

                <div class="products-table-container">
                    <table class="products-table">
                        <thead>
                            <tr>
                                <th>Product Name</th>
                                <th>Length (cm)</th>
                                <th>Width (cm)</th>
                                <th>Height (cm)</th>
                                <th>CBM (m¬≥)</th>
                                <th>Product Cost (¬•)</th>
                                <th>Local Shipping (¬•)</th>
                                <th>Total Product (¬•)</th>
                                <th>Product Cost (‚Çµ)</th>
                                <th>Shipping Cost (‚Çµ)</th>
                                <th>Total Cost (‚Çµ)</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                        <tbody id="productsTableBody">
                            <!-- Products will be added here dynamically -->
                        </tbody>
                    </table>
                </div>
            </div>
        </div>

        <!-- Fixed Bottom Section: Grand Totals -->
        <div class="bottom-section">
            <div class="totals-card">
                <h3>üìä Grand Totals</h3>
                <div class="totals-grid">
                    <div class="total-item">
                        <label>Total CBM</label>
                        <span id="totalCBM">0.000</span>
                    </div>
                    <div class="total-item">
                        <label>Total Product Cost (‚Çµ)</label>
                        <span id="totalProductCost">0.00</span>
                    </div>
                    <div class="total-item">
                        <label>Total Shipping Cost (‚Çµ)</label>
                        <span id="totalShippingCost">0.00</span>
                    </div>
                    <div class="total-item grand-total">
                        <label>Grand Total (‚Çµ)</label>
                        <span id="grandTotal">0.00</span>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Share Modal (hidden by default) -->
    <div id="shareModal" class="modal" style="display: none;">
        <div class="modal-content">
            <div class="modal-header">
                <h3>üì± Share Your Data</h3>
                <button class="close-btn" onclick="closeShareModal()">&times;</button>
            </div>
            <div class="modal-body">
                <p>Share this URL to access your data on any device:</p>
                <div class="url-container">
                    <input type="text" id="shareUrl" readonly>
                    <button onclick="copyShareUrl()" class="copy-btn">Copy</button>
                </div>
                <div class="share-options">
                    <button onclick="shareViaWhatsApp()" class="share-option-btn">üì± WhatsApp</button>
                    <button onclick="shareViaEmail()" class="share-option-btn">üìß Email</button>
                    <button onclick="shareViaSMS()" class="share-option-btn">üí¨ SMS</button>
                </div>
                <div class="qr-section">
                    <h4>QR Code - Scan with Phone</h4>
                    <div id="qrcode"></div>
                </div>
            </div>
        </div>
    </div>

    <script src="dashboard.js"></script>
</body>
</html>
